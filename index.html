<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Licen√ßas VEO3 - Online</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }

        /* Tela de Login */
        .login-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 48px;
            max-width: 400px;
            width: 100%;
            text-align: center;
        }

        .login-title {
            font-size: 28px;
            font-weight: 800;
            color: #fff;
            margin-bottom: 8px;
        }

        .login-subtitle {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 32px;
        }

        .login-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 14px 16px;
            font-size: 15px;
            color: #fff;
            margin-bottom: 16px;
            text-align: center;
        }

        .login-input:focus {
            outline: none;
            border-color: #f59e0b;
            background: rgba(255, 255, 255, 0.12);
        }

        .login-btn {
            width: 100%;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            border: none;
            border-radius: 8px;
            padding: 14px 24px;
            font-size: 15px;
            font-weight: 700;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.4);
        }

        .error-message {
            color: #ef4444;
            font-size: 14px;
            margin-top: 12px;
            display: none;
        }

        /* Dashboard */
        .dashboard {
            display: none;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 48px;
            position: relative;
        }

        .header-title {
            font-size: 32px;
            font-weight: 800;
            color: #fff;
            margin-bottom: 8px;
        }

        .header-subtitle {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.6);
        }

        .logout-btn {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 13px;
            font-weight: 600;
            color: #ef4444;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
        }

        .form-input, .form-select {
            width: 100%;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 15px;
            color: #fff;
            font-family: inherit;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #f59e0b;
            background: rgba(255, 255, 255, 0.12);
        }

        .btn {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            border: none;
            border-radius: 8px;
            padding: 14px 24px;
            font-size: 15px;
            font-weight: 700;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .generated-license {
            background: rgba(16, 185, 129, 0.15);
            border: 2px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .license-info {
            color: #10b981;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .license-key {
            font-family: 'Courier New', monospace;
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 2px;
            color: #fff;
            text-align: center;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin: 16px 0;
        }

        .license-credentials {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
        }

        .credential-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .credential-row:last-child {
            border-bottom: none;
        }

        .credential-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        .credential-value {
            color: #fff;
            font-weight: 600;
            font-size: 14px;
        }

        .copy-btn {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 13px;
            font-weight: 600;
            color: #60a5fa;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 12px;
        }

        .copy-btn:hover {
            background: rgba(59, 130, 246, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            padding: 20px;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 800;
            color: #10b981;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .license-list {
            margin-top: 24px;
        }

        .license-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .license-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .license-item-key {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: 700;
            color: #fff;
            letter-spacing: 1px;
        }

        .license-item-status {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-active {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .license-item-details {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .loading {
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            padding: 40px;
        }

        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid #f59e0b;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .refresh-btn {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 13px;
            font-weight: 600;
            color: #60a5fa;
            cursor: pointer;
            transition: all 0.2s ease;
            float: right;
        }

        .refresh-btn:hover {
            background: rgba(59, 130, 246, 0.3);
        }
    </style>
</head>
<body>
    <!-- Tela de Login -->
    <div class="login-screen" id="loginScreen">
        <div class="login-card">
            <div class="login-title">üîê Acesso Restrito</div>
            <div class="login-subtitle">Gerador de Licen√ßas VEO3 - Online com Firebase</div>
            <input type="password" id="passwordInput" class="login-input" placeholder="Digite a senha de acesso" />
            <button class="login-btn" onclick="checkPassword()">Entrar</button>
            <div class="error-message" id="errorMessage">‚ùå Senha incorreta</div>
        </div>
    </div>

    <!-- Dashboard (ap√≥s login) -->
    <div class="dashboard" id="dashboard">
        <div class="container">
            <div class="header">
                <h1 class="header-title">üî• Gerador de Licen√ßas Online</h1>
                <p class="header-subtitle">VEO3 Automator - Firebase Integrado</p>
                <button class="logout-btn" onclick="logout()">Sair</button>
            </div>

            <!-- Estat√≠sticas -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalLicenses">-</div>
                    <div class="stat-label">Licen√ßas Geradas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeLicenses">-</div>
                    <div class="stat-label">Licen√ßas Ativas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayLicenses">-</div>
                    <div class="stat-label">Geradas Hoje</div>
                </div>
            </div>

            <!-- Gerador -->
            <div class="card">
                <h2 class="card-title">Gerar Nova Licen√ßa</h2>

                <div class="form-group">
                    <label class="form-label">Nome do Cliente</label>
                    <input type="text" id="clientName" class="form-input" placeholder="Jo√£o Silva">
                </div>

                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="clientEmail" class="form-input" placeholder="joao@email.com">
                </div>

                <div class="form-group">
                    <label class="form-label">Pacote</label>
                    <select id="clientPackage" class="form-select">
                        <option value="essencial">Automa√ß√£o Essencial - R$ 1.497</option>
                        <option value="acelerada" selected>Automa√ß√£o Acelerada - R$ 2.997</option>
                        <option value="vip">Automa√ß√£o Total VIP - R$ 4.997</option>
                    </select>
                </div>

                <button class="btn" id="generateBtn" onclick="generateLicense()">üîë Gerar Licen√ßa</button>

                <!-- Resultado -->
                <div class="generated-license" id="generatedResult">
                    <div class="license-info">‚úÖ Licen√ßa Gerada e Salva no Firebase!</div>

                    <div class="license-key" id="generatedKey">XXXX-XXXX-XXXX-XXXX</div>

                    <div class="license-credentials">
                        <div class="credential-row">
                            <span class="credential-label">Usu√°rio:</span>
                            <span class="credential-value" id="generatedUsername">-</span>
                        </div>
                        <div class="credential-row">
                            <span class="credential-label">Senha:</span>
                            <span class="credential-value" id="generatedPassword">-</span>
                        </div>
                        <div class="credential-row">
                            <span class="credential-label">Pacote:</span>
                            <span class="credential-value" id="generatedPackage">-</span>
                        </div>
                        <div class="credential-row">
                            <span class="credential-label">Validade:</span>
                            <span class="credential-value" id="generatedExpiry">-</span>
                        </div>
                    </div>

                    <button class="copy-btn" onclick="copyCredentials()">üìã Copiar Credenciais</button>
                </div>
            </div>

            <!-- Lista de Licen√ßas -->
            <div class="card">
                <h2 class="card-title">
                    Licen√ßas no Firebase
                    <button class="refresh-btn" onclick="loadLicensesFromFirebase()">üîÑ Atualizar</button>
                </h2>
                <div class="license-list" id="licenseList">
                    <div class="loading">
                        <div class="spinner"></div>
                        Carregando licen√ßas do Firebase...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configura√ß√£o do Firebase
        const FIREBASE_CONFIG = {
            projectId: "veo3automator",
            apiKey: "AIzaSyCeh-SnpsmOcpxgJHirM_volJloRuzBzC4",
            databaseURL: "https://firestore.googleapis.com/v1/projects/veo3automator/databases/(default)/documents"
        };

        // Senha de acesso (MUDE ESTA SENHA!)
        const ADMIN_PASSWORD = 'nardoto2024';

        // Dados globais
        let allLicenses = [];
        let lastGeneratedLicense = null;

        // Verifica se j√° est√° logado
        if (sessionStorage.getItem('veo3_admin_logged') === 'true') {
            showDashboard();
        }

        // Enter no campo de senha
        document.getElementById('passwordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            const errorMessage = document.getElementById('errorMessage');

            if (password === ADMIN_PASSWORD) {
                sessionStorage.setItem('veo3_admin_logged', 'true');
                showDashboard();
            } else {
                errorMessage.style.display = 'block';
                document.getElementById('passwordInput').value = '';
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                }, 3000);
            }
        }

        async function showDashboard() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            await loadLicensesFromFirebase();
            updateStats();
        }

        function logout() {
            sessionStorage.removeItem('veo3_admin_logged');
            location.reload();
        }

        // Gera chave de licen√ßa
        function generateLicenseKey() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            const segments = 4;
            const segmentLength = 4;

            const key = [];
            for (let i = 0; i < segments; i++) {
                let segment = '';
                for (let j = 0; j < segmentLength; j++) {
                    segment += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                key.push(segment);
            }

            return key.join('-');
        }

        // Gera senha aleat√≥ria
        function generatePassword() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let password = '';
            for (let i = 0; i < 12; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return password;
        }

        // Gera licen√ßa completa e salva no Firebase
        async function generateLicense() {
            const name = document.getElementById('clientName').value.trim();
            const email = document.getElementById('clientEmail').value.trim();
            const packageType = document.getElementById('clientPackage').value;

            if (!name || !email) {
                alert('Por favor, preencha nome e email do cliente!');
                return;
            }

            const btn = document.getElementById('generateBtn');
            btn.disabled = true;
            btn.textContent = '‚è≥ Gerando e salvando no Firebase...';

            try {
                const key = generateLicenseKey();
                const username = name.toLowerCase().replace(/\s+/g, '');
                const password = generatePassword();
                const packageName = document.getElementById('clientPackage').options[document.getElementById('clientPackage').selectedIndex].text;
                const expiryDate = new Date();
                expiryDate.setMonth(expiryDate.getMonth() + 6); // 6 meses

                const licenseData = {
                    licenseKey: key,
                    username: username,
                    password: password,
                    name: name,
                    email: email,
                    package: packageName,
                    packageType: packageType,
                    expiresAt: expiryDate.getTime(),
                    status: 'active',
                    deviceFingerprint: null // Ser√° preenchido quando ativar
                };

                // Salva no Firebase usando REST API
                const url = `${FIREBASE_CONFIG.databaseURL}/licenses/${key}?key=${FIREBASE_CONFIG.apiKey}`;

                const firebaseDoc = {
                    fields: {
                        licenseKey: { stringValue: key },
                        username: { stringValue: username },
                        password: { stringValue: password }, // AGORA SALVA A SENHA!
                        name: { stringValue: name },
                        email: { stringValue: email },
                        plan: { stringValue: packageName },
                        expiresAt: { integerValue: expiryDate.getTime().toString() },
                        status: { stringValue: 'active' },
                        deviceFingerprint: { stringValue: '' },
                        createdAt: { timestampValue: new Date().toISOString() }
                    }
                };

                const response = await fetch(url, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(firebaseDoc)
                });

                if (!response.ok) {
                    throw new Error('Erro ao salvar no Firebase');
                }

                console.log('‚úÖ Licen√ßa salva no Firebase:', key);

                // Mostra resultado
                lastGeneratedLicense = licenseData;
                document.getElementById('generatedKey').textContent = key;
                document.getElementById('generatedUsername').textContent = username;
                document.getElementById('generatedPassword').textContent = password;
                document.getElementById('generatedPackage').textContent = packageName;
                document.getElementById('generatedExpiry').textContent = expiryDate.toLocaleDateString('pt-BR');
                document.getElementById('generatedResult').style.display = 'block';

                // Atualiza lista
                await loadLicensesFromFirebase();
                updateStats();

                // Limpa form
                document.getElementById('clientName').value = '';
                document.getElementById('clientEmail').value = '';

                // Scroll para resultado
                document.getElementById('generatedResult').scrollIntoView({ behavior: 'smooth' });

            } catch (error) {
                console.error('‚ùå Erro:', error);
                alert('Erro ao gerar licen√ßa. Verifique sua conex√£o com a internet.');
            } finally {
                btn.disabled = false;
                btn.textContent = 'üîë Gerar Licen√ßa';
            }
        }

        // Carrega licen√ßas do Firebase
        async function loadLicensesFromFirebase() {
            const list = document.getElementById('licenseList');
            list.innerHTML = '<div class="loading"><div class="spinner"></div>Carregando licen√ßas do Firebase...</div>';

            try {
                const url = `${FIREBASE_CONFIG.databaseURL}/licenses?key=${FIREBASE_CONFIG.apiKey}`;
                const response = await fetch(url);

                if (!response.ok) {
                    throw new Error('Erro ao carregar licen√ßas');
                }

                const data = await response.json();

                if (!data.documents || data.documents.length === 0) {
                    list.innerHTML = '<p style="color: rgba(255, 255, 255, 0.5); text-align: center; padding: 40px;">Nenhuma licen√ßa gerada ainda</p>';
                    allLicenses = [];
                    return;
                }

                // Converte documentos do Firebase
                allLicenses = data.documents.map(doc => {
                    const fields = doc.fields;
                    return {
                        licenseKey: fields.licenseKey?.stringValue || '',
                        username: fields.username?.stringValue || '',
                        password: fields.password?.stringValue || 'N√£o dispon√≠vel', // AGORA MOSTRA SENHA!
                        name: fields.name?.stringValue || '',
                        email: fields.email?.stringValue || '',
                        plan: fields.plan?.stringValue || '',
                        status: fields.status?.stringValue || 'active',
                        deviceFingerprint: fields.deviceFingerprint?.stringValue || '',
                        createdAt: fields.createdAt?.timestampValue || new Date().toISOString(),
                        expiresAt: parseInt(fields.expiresAt?.integerValue || 0),
                        documentPath: doc.name // Salva o caminho para poder deletar
                    };
                });

                // Ordena por data de cria√ß√£o (mais recente primeiro)
                allLicenses.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

                updateLicenseList();

            } catch (error) {
                console.error('‚ùå Erro ao carregar licen√ßas:', error);
                list.innerHTML = '<p style="color: #ef4444; text-align: center; padding: 40px;">‚ùå Erro ao carregar licen√ßas do Firebase</p>';
            }
        }

        // Atualiza lista de licen√ßas
        function updateLicenseList() {
            const list = document.getElementById('licenseList');

            if (allLicenses.length === 0) {
                list.innerHTML = '<p style="color: rgba(255, 255, 255, 0.5); text-align: center; padding: 40px;">Nenhuma licen√ßa gerada ainda</p>';
                return;
            }

            list.innerHTML = allLicenses.map((license, index) => {
                const isActivated = license.deviceFingerprint && license.deviceFingerprint.length > 10;
                const activatedText = isActivated ? 'üü¢ Ativada' : '‚ö™ N√£o Ativada';

                return `
                <div class="license-item">
                    <div class="license-item-header">
                        <div class="license-item-key">${license.licenseKey}</div>
                        <div class="license-item-status status-active">${activatedText}</div>
                    </div>
                    <div class="license-item-details">
                        <strong>${license.name}</strong> ‚Ä¢ ${license.email}<br>
                        ${license.plan} ‚Ä¢ Usu√°rio: ${license.username}<br>
                        Senha: <span style="filter: blur(5px);" id="pwd-${index}">${license.password}</span>
                        <button onclick="togglePassword(${index})" style="margin-left: 10px; padding: 2px 8px; background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 4px; color: #60a5fa; cursor: pointer;">üëÅÔ∏è Ver</button><br>
                        Criada em: ${new Date(license.createdAt).toLocaleDateString('pt-BR')} √†s ${new Date(license.createdAt).toLocaleTimeString('pt-BR')}
                        ${isActivated ? '<br><small>üîí Vinculada ao fingerprint: ' + license.deviceFingerprint.substring(0, 16) + '...</small>' : ''}
                        <br>
                        <button onclick="copyLicenseCredentials(${index})" style="margin-top: 10px; margin-right: 10px; padding: 6px 12px; background: rgba(16, 185, 129, 0.2); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 6px; color: #10b981; cursor: pointer;">üìã Copiar Credenciais</button>
                        <button onclick="revokeLicense(${index})" style="margin-top: 10px; padding: 6px 12px; background: rgba(239, 68, 68, 0.2); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 6px; color: #ef4444; cursor: pointer;">üóëÔ∏è Revogar Licen√ßa</button>
                    </div>
                </div>
            `;
            }).join('');
        }

        // Atualiza estat√≠sticas
        function updateStats() {
            const total = allLicenses.length;
            const active = allLicenses.filter(l => l.deviceFingerprint && l.deviceFingerprint.length > 10).length;

            const today = new Date().toDateString();
            const todayCount = allLicenses.filter(l => {
                const created = new Date(l.createdAt).toDateString();
                return created === today;
            }).length;

            document.getElementById('totalLicenses').textContent = total;
            document.getElementById('activeLicenses').textContent = active;
            document.getElementById('todayLicenses').textContent = todayCount;
        }

        // Copia credenciais
        function copyCredentials() {
            if (!lastGeneratedLicense) return;

            const key = lastGeneratedLicense.licenseKey;
            const username = lastGeneratedLicense.username;
            const password = lastGeneratedLicense.password;
            const packageName = lastGeneratedLicense.package;

            const text = `üéâ Seu acesso ao VEO3 Automator est√° pronto!

üë§ Usu√°rio: ${username}
üîë Senha: ${password}
üé´ Chave de Licen√ßa: ${key}
üì¶ Pacote: ${packageName}

‚öôÔ∏è COMO INSTALAR:
1. Extraia a pasta da extens√£o
2. Abra Chrome ‚Üí chrome://extensions
3. Ative "Modo do desenvolvedor"
4. Clique em "Carregar sem compacta√ß√£o"
5. Selecione a pasta extra√≠da

üöÄ COMO ATIVAR:
1. Abra https://labs.google/fx/tools/flow/
2. Uma janela de ativa√ß√£o abrir√° automaticamente
3. Cole suas credenciais acima
4. Ap√≥s ativar, recarregue a p√°gina (F5)

‚úÖ Pronto! O bot√£o VEO3 aparecer√° no canto superior direito.

Suporte: (27) 99913-2594
https://nardoto.com.br`;

            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ Credenciais copiadas! Cole no WhatsApp do cliente.');
            });
        }

        // Fun√ß√£o para mostrar/ocultar senha
        function togglePassword(index) {
            const pwdElement = document.getElementById(`pwd-${index}`);
            if (pwdElement.style.filter === 'blur(5px)') {
                pwdElement.style.filter = 'none';
            } else {
                pwdElement.style.filter = 'blur(5px)';
            }
        }

        // Fun√ß√£o para copiar credenciais de uma licen√ßa espec√≠fica
        function copyLicenseCredentials(index) {
            const license = allLicenses[index];

            const text = `üéâ Seu acesso ao VEO3 Automator est√° pronto!

üë§ Usu√°rio: ${license.username}
üîë Senha: ${license.password}
üé´ Chave de Licen√ßa: ${license.licenseKey}
üì¶ Pacote: ${license.plan}

‚öôÔ∏è COMO INSTALAR:
1. Extraia a pasta da extens√£o
2. Abra Chrome ‚Üí chrome://extensions
3. Ative "Modo do desenvolvedor"
4. Clique em "Carregar sem compacta√ß√£o"
5. Selecione a pasta extra√≠da

üöÄ COMO ATIVAR:
1. Abra https://labs.google/fx/tools/flow/
2. Uma janela de ativa√ß√£o abrir√° automaticamente
3. Cole suas credenciais acima
4. Ap√≥s ativar, recarregue a p√°gina (F5)

‚úÖ Pronto! O bot√£o VEO3 aparecer√° no canto superior direito.

Suporte: (27) 99913-2594
https://nardoto.com.br`;

            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ Credenciais copiadas! Cole no WhatsApp do cliente.');
            });
        }

        // Fun√ß√£o para revogar licen√ßa
        async function revokeLicense(index) {
            const license = allLicenses[index];

            if (!confirm(`‚ö†Ô∏è Tem certeza que deseja REVOGAR a licen√ßa:\n\n${license.licenseKey}\n${license.name} - ${license.email}\n\nO cliente perder√° acesso IMEDIATAMENTE!`)) {
                return;
            }

            try {
                // Deleta no Firebase
                const url = `${FIREBASE_CONFIG.databaseURL}/licenses/${license.licenseKey}?key=${FIREBASE_CONFIG.apiKey}`;

                const response = await fetch(url, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok || response.status === 404) {
                    alert('‚úÖ Licen√ßa revogada com sucesso!');

                    // Remove da lista local
                    allLicenses.splice(index, 1);

                    // Atualiza interface
                    updateLicenseList();
                    updateStats();
                } else {
                    throw new Error('Erro ao revogar licen√ßa');
                }

            } catch (error) {
                console.error('‚ùå Erro ao revogar:', error);
                alert('‚ùå Erro ao revogar licen√ßa. Tente pelo Firebase Console.');
            }
        }

        // Torna fun√ß√µes globais
        window.togglePassword = togglePassword;
        window.copyLicenseCredentials = copyLicenseCredentials;
        window.revokeLicense = revokeLicense;

        console.log('üî• Gerador Online carregado!');
    </script>
</body>
</html>
